pre-commit:
  jobs:
    - name: lint
      run: bun run lint:fix
      stage_fixed: true

    - name: format
      run: bun run format --staged
      stage_fixed: true

    - name: typegen
      run: bun run typegen

    - name: generate-api
      run: bun run generate:api

    - name: git add auto-generated files
      run: |
        git add \
          client/openapi.json \
          client/pkg/api/api.gen.go \
          worker-configuration.d.ts

pre-push:
  jobs:
    - name: typecheck
      run: bun run typecheck

    - name: test
      run: bun run test:coverage

# Validate commit messages
commit-msg:
  commands:
    "lint commit message":
      run: bunx commitlint --config .commitlint.ts --edit {1}
